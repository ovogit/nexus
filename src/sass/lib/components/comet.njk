{# DO NOT EDIT: The contents of this file are dynamically generated and will be overwritten #}
{% macro block_message(
    type="informational",
    header=false,
    content=false,
    cta_text=false,
    cta_link=false,
    icon_path=false,
    class=false
)%}

    {# Concatenate the overall class for the block-message #}
    {% set block_message_class = "" %}
    {% set icon_name = "" %}
    {% set icons = {
        "informational": "message-information",
        "warning": "message-warning",
        "error": "message-error",
        "success": "badge-correct",
        "device-rotate": "device-rotate"
    } %}

    {% set block_message_class = block_message_class + "comet-block-message--" + type + " " %}
    {% set icon_name = icons[type] %}
    {% if class %}
        {% set block_message_class = block_message_class + class %}
    {% endif %}

    {# -------------------------------------------- #}

    <div class="comet-block-message{{" " + block_message_class | trim }}" {% if type == "error" %}role="alert"{% endif %} >
        <div class="comet-block-message__icon-box">
            {{ icon(name=icon_name, class="comet-block-message__icon", path=icon_path) }}
        </div>
        <div class="comet-block-message__content comet-long-form-text">
            {% if content %}
                {% if header %}
                    <h4>{{header|safe}}</h4>
                {% endif %}
                <p>{{content|safe}}</p>
            {% elif caller %}
               {{ caller() }}
            {% endif %}
        </div>
        {% if cta_text %}
            {{ button(variations=["primary", "small"], el="a", href=cta_link, text=cta_text) }}
        {% endif %}
    </div>
{% endmacro %}
{% macro button_group(class=false, role="group", aria_label=false) %}
    <div class="comet-button-group{{ ' ' + class if class }}" {% if role %} role="{{ role }}" {% endif %} {% if aria_label %} aria-label="{{ aria_label }}" {% endif %}>
        {{ caller() }}
    </div>
{% endmacro %}

{% macro button(
            variations=[], 
            text=false, 
            el="button", 
            href=false, 
            class=false, 
            aria_label=false, 
            attrs=false, 
            id=false, 
            name=false,
            icon_name=false,
            icon_left=false, 
            icon_right=false,
            icon_path=false, 
            checked=false,
            style=false) %}

    {# Macro convenience, allows for calling {{ button(icon_name="star") }} and rendering an icon-only button #}
    {% if icon_left == false and icon_name != false %}
        {% set icon_left = icon_name %}
    {% endif %}

    {# Concatenate the overall class for the button #}
    {% set button_class = "" %}
    {%- for variation in variations -%}
        {% set button_class = button_class + "comet-button--" + variation + " " %}
    {%- endfor -%}
    {% if class %}
        {% set button_class = button_class + class %}
    {% endif %}
    {# End class concatenation #}

    {# Automatically set the element to be an anchor if an href is passed in and the el parameter is set to its default #}
    {% if href and el == "button" %}
        {% set el="a" %}
    {% endif %}

    {% if el == "checkbox" or el == "radio" %}
        {# Save the passed in element type to generate a corresponding input element, but then reset el to be a <label> that will wrap the checkbox or radio button #}
        {% set toggle_type = el %}
        {% set el = "label" %}
        {% if id == false %}
            {% set id = "comet-button-id--" + range(0, 100000) | random %}
        {% endif %}
        {% set button_class = button_class + " comet-button--toggle" %}
    {% endif %}
    {# -------------------------------------------- #}

    {# Render hidden input before label, input[type='radio'] or input[type='checkbox'] #}
    {% if toggle_type %}
        <input id="{{ id }}" type="{{ toggle_type }}" class="comet-button__input"  
            {% if name == false and toggle_type == 'radio' and button_group_name %}
                name="{{ button_group_name }}"
            {% endif %}
            {% if name %}
                name="{{ name }}"
            {% endif %}
            {% if checked %}
                checked
            {% endif %} 
        />
    {% endif %}

    {% if el == 'input' or el == 'submit' or el == 'input-button' %}
        {# <input type='submit' and input type='button'> elements get wrapped in an outer container #}
        {% set input_type = el %}
        {% if input_type == 'input' %}
            {% set input_type = 'submit' %}
        {% elif input_type == 'input-button' %}
            {% set input_type = 'button' %}
        {% endif %}
        <div class="comet-button{{ ' ' + button_class | trim }}{{ ' comet-button--icon-with-text' if (icon_left or icon_right) and text }}{{ ' comet-button--icon-only' if (icon_left or icon_right) and text == false }}" role="button" tabindex="0"
            {% if aria_label %}
                aria-label="{{ aria_label}}"
            {% endif %}
            {% if attrs %}
                {{ attrs | safe }}
            {% endif %}
            {% if style %}
                style="{{ style }}"
            {% endif %}
            >
            <span class="comet-button__inner">
                <input class="comet-button__input--{{ input_type }}" type="{{ input_type }}" value="" />
                {{ button_content(text=text, icon_left=icon_left, icon_right=icon_right, icon_path=icon_path) }}
            </span>
        </div>
    {% else %}
        <{{ el}} 
            class="comet-button{{ ' ' + button_class | trim }}{{ ' comet-button--icon-with-text' if (icon_left or icon_right) and text }}{{ ' comet-button--icon-only' if (icon_left or icon_right) and text == false }}" {% if el != "button" %} role="button" {% endif %}
            {% if el == "a" and href %}
                href="{{ href }}"
            {% elseif el == "a" and href == false %}
                href="#"
            {% endif %}
            {% if aria_label %}
                aria-label="{{ aria_label}}"
            {% endif %}
            {% if attrs %}
                {{ attrs | safe }}
            {% endif %}
            {% if toggle_type %}
                for="{{ id }}"

            {% endif %}
            {% if style %}
                style="{{ style }}"
            {% endif %}
        >
            {% if (icon_left or icon_right) and text %}
                <span class="comet-button__inner">
            {% endif %}
                    {{ button_content(text=text, icon_left=icon_left, icon_right=icon_right, icon_path=icon_path) }}
            {% if (icon_left or icon_right) and text %}
                </span>
            {% endif %}
        </{{ el}}>
    {% endif %}
{% endmacro %}


{# This macro is used internally by the button() macro, not intended for use on its own #}
{% macro button_content(
            text=false, 
            icon_left=false, 
            icon_right=false,
            icon_path=false) %}
    {# Set Default Text if text is false and no icons are set, so button() can be called for rapid prototyping #}
    {% if icon_left == false and icon_right == false and text == false %}
        {# Icon name is checked, so icon-only buttons can be rendered #}
        {% set text = "Click Me" %}
    {% endif %}


    {# Left Icon #}
    {% if icon_left %}
        {{ icon(name=icon_left, class="comet-button__icon comet-button__icon--left", path=icon_path) }}
    {% endif %}

    {# Text #}
    {% if text %}
        {% if icon_left or icon_right %}
            <span class="comet-button__text">
        {% endif %}
                {{ text | safe }}
        {% if icon_left or icon_right %}
            </span>
        {% endif %}
    {% else %}
        <span class="comet-screenreader-only">{{ aria_label }}</span>
    {% endif %}

    {# Right Icon #}
    {% if icon_right %}
        {{ icon(name=icon_right, class="comet-button__icon comet-button__icon--right", path=icon_path) }}
    {% endif %}
{% endmacro %}

{% macro button_icon(
                icon_name="", 
                icon_path=false, 
                position="left", 
                text="", 
                variations=[], 
                el="button", 
                href="", 
                class="", 
                value="", 
                aria_label="", 
                attrs=false) %}
    {% if position == "left" %}
        {% set icon_left = icon_name %}
    {% else %}
        {% set icon_left = false %}
    {% endif %}
    
    {% if position == "right" %}
        {% set icon_right = icon_name %}
    {% else %}
        {% set icon_right = false %}
    {% endif %}
    
    {{ button(icon_left=icon_left, icon_right=icon_right, icon_path=icon_path, text=text, variations=variations, el=el, href=href, class=class, value=value, aria_label=aria_label, attrs=attrs) }}
{% endmacro %}

{% macro callout(
    type="",
    header=false,
    content=false,
    icon_path=false,
    icon_name=false,
    class=false,
    subject=false,
    icon_screenreader_text=false
)%}

	{# Concatenate the overall class for the callout #}
    {% set callout_class = "" %}
    {% set icons = {
        "misconception": "callout-misconception",
        "definition": "callout-glossary-term",
        "teacher-note": "callout-teacher-note",
        "focus-benchmark": "callout-state-standard",
        "did-you-know": "callout-did-you-know"
    } %}

    {% set callout_class = callout_class + "comet-callout--" + type + " " %}
    {% if type == "generic" or type == "generic-white" %}
        {% set icon_name = icon_name %}
    {% else %}
        {% set icon_name = icons[type] %}
    {% endif %}

    {% if subject %}
        {% set callout_class = callout_class + "comet-callout--" + subject + " " %}
    {% endif %}

    {% if class %}
        {% set callout_class = callout_class + class %}
    {% endif %}

    {# -------------------------------------------- #}

	<div class="comet-callout{{" " + callout_class | trim }}">
        {% if icon_name %}
            <div class="comet-callout__icon-box">
                {{ icon(name=icon_name, class="comet-callout__icon", path=icon_path, screenreader_text=icon_screenreader_text) }}
            </div>
        {% endif %}
	    <div class="comet-callout__content">
            {% if header %}
                <h3>{{header|safe}}</h3>
            {% endif %}
            <p>{{content|safe}}</p>
        </div>
	</div>
{% endmacro %}
{% macro card(
    item = {},
    element_type = "li",
    icon_path = false
) %}
        <{{ element_type }} class="comet-card{% if (item.class) %} {{item.class}}{% endif %}{% if (item.theme) %} comet-card--{{item.theme}}{% endif %}">
            <a href="{{ item.href }}" class="comet-card__card-anchor">

            <!-- Image / Icon -->

                {% set thumbnail_classes = "" %}
                {% if item.thumbnail_contain %}
                    {% set thumbnail_classes = thumbnail_classes + " comet-thumbnail--contain" %}
                {% endif %}
                {% if item.thumbnail_square %}
                    {% set thumbnail_classes = thumbnail_classes + " comet-thumbnail--squared" %}
                {% endif %}

                {{ thumbnail(
                    class = thumbnail_classes,
                    asset_type = item.asset_type,
                    img_url = item.img_url,
                    icon_path = icon_path
                )}}

            <!-- Copy -->

                <div class="comet-card__copy">
                    <span class="comet-card__type">{{ item.type }}</span>
                    <p class="comet-card__title">{{ item.title }}</p>

                    {% if item.caption %}
                    <p class="comet-card__caption">{{ item.caption }}</p>
                    {% endif %}

                    {% if item.duration %}
                    <p class="comet-card__duration comet-pill--overlay">{{ item.duration }}</p>
                    {% endif %}
                </div>
            </a>

            <!-- List Group -->

            {% set list_group_class = "comet-theme--dark-background" %}

            {% if item.theme == "white" or item.theme == "light" %}
                {% set list_group_class = "" %}
            {% endif %}


            {% if item.list_group_items %}
                {{ list_group(
                    rows = item.list_group_items,
                    class=list_group_class
                )}}
            {% endif %}

            <!-- Actions (icons, buttons) -->
            <!-- for later release -->

        </{{ element_type }}>
{% endmacro %}

{% macro cards(
	items = false,
    class = false,
    icon_path = false
) %}

	{% if items %}
    <ul class="comet-cards{% if (class) %} {{class}}{% endif %}">

    	{% for item in items %}
            {{ card(item=item, element_type='li', icon_path=icon_path) }}
        {% endfor %}

		<li class="comet-card comet-card--invisible"></li>
		<li class="comet-card comet-card--invisible"></li>
		<li class="comet-card comet-card--invisible"></li>

    </ul>
    {% endif %}

{% endmacro %}

{% macro dialog(
    header=false,
    content=false,
    primary_cta_link=false,
    primary_cta_text=false,
    primary_cta_type="primary",
    secondary_cta_link=false,
    secondary_cta_text=false,
    secondary_cta_type="ghost",
    cancel_cta_text=false,
    cancel_cta_type="ghost",
    class=false,
    id=false
)%}

    {# -------------------------------------------- #}

	<div {{ "id=" + id if id }} class="comet-dialog{{ ' ' + class if class }}">

		<div class="comet-dialog__inner comet-long-form-text">
            {% if header %}
                <h3 class="comet-dialog__header{{ ' comet-dialog__header--no-content' if not content }}">{{header}}</h3>
            {% endif %}
            {% if content %}
                <p class="comet-dialog__content">{{content}}</p>
            {% endif %}
        </div>

        <div class="comet-dialog__button-row">
            {% if cancel_cta_text %}
                {{ button(variations=[cancel_cta_type], text=cancel_cta_text, class="comet-dialog__button comet-dialog__button--cancel js-comet-dialog__button--cancel js-comet-modal__close-button") }}
            {% endif %}
            {% if secondary_cta_text %}
                {% if secondary_cta_link %}
                    {{ button(variations=[secondary_cta_type], el="a", href=secondary_cta_link, text=secondary_cta_text, class="comet-dialog__button") }}
                {% else %}
                    {{ button(variations=[secondary_cta_type], text=secondary_cta_text, class="comet-dialog__button") }}
                {% endif %}
            {% endif %}
            {% if primary_cta_link %}
                {{ button(variations=[primary_cta_type], el="a", href=primary_cta_link, text=primary_cta_text, class="comet-dialog__button") }}
            {% else %}
                {{ button(variations=[primary_cta_type], text=primary_cta_text, class="comet-dialog__button") }}
            {% endif %}
        </div>

	</div>
{% endmacro %}
{% macro dropdown_menu(
            id=false, 
            class=false, 
            list_group_class=false,
            menu_alignment="left", 
            menu_placement="bottom", 
            menu_items=[{
                    label: "Menu Item 1", 
                    href: "#"
                }, 
                {
                    label: "Menu Item 2", 
                    href: "#"
                }]) %}
    {% if list_group_class %}
        {% set list_group_class = list_group_class + " comet-dropdown-menu__list-group comet-list-group--no-hairlines" %}
    {% else %}
        {% set list_group_class = "comet-dropdown-menu__list-group comet-list-group--no-hairlines" %}
    {% endif %}

    <div class="comet-dropdown-menu comet-popover comet-popover--{{ menu_placement }}-{{ menu_alignment }}-aligned{{ ' ' + class if class }}" id="{{ id }}" data-comet-popover-align="{{ menu_alignment }}">
        {{ list_group(class=list_group_class, rows=menu_items) }}
    </div>
{% endmacro %}

{% macro embedded_image(
    guid='12345',
    href='/player/view/assetguid/',
    src= '/images/components/embedded-image/',
    title=false,
    caption=false,
    alt='',
    new=false,
    contained=false,
    expandable=true,
    icon_path=false,
    full_size=false
)%}
    <div class="comet-embedded">
        <div class="comet-embedded__media">
            <div class="comet-embedded__overlay">
            {{ embedded_action_bar(
                expandable=expandable,
                icon_path=icon_path
            )}}
            </div>
            {% if not full_size %}
            <div class="comet-embedded__image-wrapper">
                <div class="comet-embedded__image{{ " comet-embedded__image--contain" if (contained) }}" style="background-image: url({{src}}{{guid}}.jpg);"></div>
            </div>
            {% endif %}
            <img class="comet-embedded__full-image{{" comet-embedded__print-image" if not full_size }}" src="{{src}}{{guid}}.jpg" alt="{{ alt }}">
        </div>
        <div class="comet-embedded__copy">
            {% if new %}{{ pill('New', class="comet-pill--new comet-embedded__pill--new") }}{% endif %}
            {% if expandable and title %}<a class="comet-embedded__link-title" href="{{href}}{{guid}}">{% endif %}
            {% if title %}<h5 class="comet-embedded__title">{{title}}</h5>{% endif %}
            {% if expandable and title %}</a>{% endif %}
            {% if caption %}<figcaption class="comet-embedded__caption">{{caption}}</figcaption>{% endif %}
        </div>
    </div>
{% endmacro %}

{% macro embedded_action_bar(
    expandable='true',
    icon_path=false
)%}
    <div class="comet-embedded_action-bar">
        {% if expandable %}
        <a class="comet-embedded_action-bar__item" title="Expand" href="{{href}}{{guid}}">
            {{ icon(name='expand', class='comet-embedded_action-bar__icon', path=icon_path) }}
        </a>
        {% endif %}
        <a class="comet-embedded_action-bar__item" title="Add to Quicklist" href="javascript:(0)">
            {{ icon(name='plus', class='comet-embedded_action-bar__icon', path=icon_path) }}
        </a>
        <a class="comet-embedded_action-bar__item" title="More Actions" href="javascript:(0)">
            {{ icon(name='ellipsis', class='comet-embedded_action-bar__icon', path=icon_path) }}
        </a>
    </div>
{% endmacro %}

{% macro embedded_video(
    guid='12345',
    href='/player/view/assetguid/',
    src= '/images/components/embedded-video/',
    title=false,
    caption=false,
    alt='',
    duration='0:00',
    new=false,
    expandable=true,
    icon_path=false
)%}
    <div class="comet-embedded">
        <div class="comet-embedded__media comet-embedded__video">
            <div class="comet-embedded__video-container video-container video-js vjs-default-skin"></div>
            {{ pill(label=duration, class="comet-embedded__pill--duration comet-pill--overlay") }}
            <div class="comet-embedded__overlay">
                {{ embedded_action_bar(
                    expandable=expandable
                )}}
                <a class="comet-embedded__play-button" href="#">
                    {{ icon(name='play', class='comet-embedded__play-icon', path=icon_path) }}
                    <span class="comet-screenreader-only">Play</span>
                </a>
            </div>
            <img class="comet-embedded__full-image" src="{{src}}{{guid}}.jpeg" alt="{{ alt }}">
        </div>
        <div class="comet-embedded__copy">
            {% if new %}
                {{ pill('New', class="comet-pill--new comet-embedded__pill--new") }}
            {% endif %}
            {% if expandable and title %}<a class="comet-embedded__link-title" href="{{href}}{{guid}}">{% endif %}
            {% if title %}<h5 class="comet-embedded__title">{{title}}</h5>{% endif %}
            {% if expandable and title %}</a>{% endif %}
            {% if caption %}<figcaption class="comet-embedded__caption">{{caption}}</figcaption>{% endif %}
        </div>
    </div>
{% endmacro %}


{% macro footer(
    env = false,
    icon_path = false
)%}
    {% call row(class="comet-footer") %}
        {% call grid_column() %}
            <ul class="comet-footer__link-list">
                <li class="comet-footer__link"><a href="https://app.{{env + "." if env }}discoveryeducation.com/static/apps/check-requirements/">Check Requirements</a></li>
                <li class="comet-footer__link"><a href="https://get.adobe.com/reader/">Download Acrobat Reader</a></li>
                <li class="comet-footer__link"><a href="http://www.{{env + "." if env }}discoveryeducation.com/aboutus/terms_of_use.cfm">Terms of Use</a></li>
                <li class="comet-footer__link"><a href="http://www.{{env + "."  if env }}discoveryeducation.com/aboutus/privacy-policy/us.cfm">Support</a></li>
                <li class="comet-footer__link"><a href="http://www.{{env + "."  if env }}discoveryeducation.com/contact-us/">Contact Us</a></li>
                <li class="comet-footer__link"><a href="http://www.{{env + "."  if env }}discoveryeducation.com/who-we-are/about-discovery-education.cfm">About Us</a></li>
                <li class="comet-footer__link"><a href="http://www.{{env + "."  if env }}discoveryeducation.com/closed-captioning/">Online Closed Captioning</a></li>
                <li class="comet-footer__link"><a href="#">Live Help Chat</a></li>
            </ul>
            <ul class="comet-footer__social-list">
                <li class="comet-footer__social-link"><a href="https://twitter.com/DiscoveryEd">{{ icon(name='twitter', class='comet-footer__social-icon', path=icon_path) }}<span class="comet-screenreader-only">Twitter</span></a></li>
                <li class="comet-footer__social-link"><a href="https://www.facebook.com/discoveryed">{{ icon(name='facebook', class='comet-footer__social-icon', path=icon_path) }}<span class="comet-screenreader-only">Facebook</span></a></li>
                <li class="comet-footer__social-link"><a href="https://www.youtube.com/user/DiscoveryEducation">{{ icon(name='youtube', class='comet-footer__social-icon', path=icon_path) }}<span class="comet-screenreader-only">YouTube</span></a></li>
            </ul>
            <div class="comet-footer__legal comet-long-form-text">
                <p>Copyright &copy; 2018 Discovery Education. All rights reserved. Discovery Education is a subsidiary of Discovery Communications, LLC.</p>
            </div>
        {% endcall %}
    {% endcall %}
{% endmacro %}

{% macro form(
            action='form/processor', 
            class=false,
            method='post') %}
    <form class="comet-form{{ ' ' + class  if class }}" method="{{ method }}" action="{{ action }}">
        {% if caller %}
            {{ caller() }}
        {% endif %}
    </form>
{% endmacro %}

{% macro form_fieldset(
            class=false) %}
    <fieldset class="comet-form__fieldset{{ ' ' + class  if class }}">
        {% if caller %}
            {{ caller() }}
        {% endif %}
    </fieldset>
{% endmacro %}


{% macro form_legend(
            class=false, 
            text="A grouping of form fields") %}
    <legend class="comet-form__legend{{ ' ' + class  if class }}">{{ text }}</legend>
{% endmacro %}


{% macro form_field_group(
            class=false, 
            error=false,
            horizontal=false) %}
    <div class="comet-form__field-group{{ ' comet-form__field-group--horizontal' if horizontal }}{{ ' comet-form--error' if error }}{{ ' ' + class  if class }}">
        {% if caller %}
            {{ caller() }}
        {% endif %}
    </div>
{% endmacro %}


{% macro form_input(
            class=false,
            describedby=false, 
            disabled=false, 
            id=false, 
            name=false, 
            placeholder=false, 
            type='text', 
            value=false) %}
    <input 
    class="comet-form__input{{ ' ' + class if class }}" 
    type="{{ type }}"
    {% if id %} id="{{ id }}" {% endif %} 
    {% if name %} name="{{ name }}" {% endif %} 
    {% if value %} value="{{ value }}" {% endif %} 
    {{ 'disabled' if disabled }} 
    {% if placeholder %} placeholder="{{ placeholder }}" {% endif %}
    {% if describedby %} aria-describedby="{{describedby}}" {% endif %}>
{% endmacro %}

{% macro form_label(
            class=false, 
            for=false, 
            optional=false, 
            required=false, 
            required_tooltip_text="This field is required.",
            text="First Name") %}
    
    <label 
            class="comet-form__label{{ ' ' + class if class }}"
        {% if for %}
            for="{{ for }}"
        {% endif %}>
            {{ text | safe }}
        {%- if optional -%}
            <span class="comet-form__label-optional">
                (Optional)
            </span>
        {%- endif -%}
        {%- if required -%}
            <abbr class="comet-form__label-required-indicator" title="{{ required_tooltip_text }}" aria-hidden="true">*</abbr>
            <span class="comet-screenreader-only">Required Field.</span>
        {% endif %}
    </label>
{% endmacro %}


{% macro form_checkbox(
            class=false,
            checked=false, 
            describedby=false, 
            disabled=false, 
            id=false, 
            label='I accept the terms and conditions',
            name=false,
            optional=false,
            required=false,
            required_tooltip_text="Please check the box.",
            value=false,
            icon_path=false) %}
    {% if id == false %}
        {% set random_number = range(0, 100000) | random %}
        {% set id = label | replace(' ', '-') | lower + '--' + random_number %}
    {% endif %}
    <label class="comet-form__checkbox{{ ' ' + class if class }}" for="{{ id }}">
        <input id="{{ id }}" type="checkbox" class="comet-form__checkbox-input" 
            {{ 'checked' if checked }} 
            {{ 'disabled' if disabled }}
            {% if name %} name="{{ name }}" {% endif %}
            {% if describedby %} aria-describedby="{{ describedby }}" {% endif %}
            {% if value %} value="{{ value }}" {% endif %}/>
        <span class="comet-form__checkbox-visual" aria-focusable="false">
            {{ icon(name='check', class='comet-form__checkbox-checked-icon', path=icon_path)}}
        </span>
        <span class="comet-form__checkbox-text">
            {{ label | safe }}
            {%- if optional -%}
                <span class="comet-form__label-optional">
                    (Optional)
                </span>
            {%- endif -%}
            {%- if required -%}
                <abbr class="comet-form__label-required-indicator" title="{{ required_tooltip_text }}" aria-hidden="true">*</abbr>
                <span class="comet-screenreader-only">Required Field.</span>
            {% endif %}
        </span>
    </label>
{% endmacro %}


{% macro form_radio_button(
            checked=false, 
            class=false, 
            describedby=false, 
            disabled=false, 
            id=false, 
            label='Choose this one', 
            name='group-name',
            optional=false,
            required=false, 
            required_tooltip_text="Please check the box",
            value='blue') %}
    {% if id == false %}
        {% set random_number = range(0, 100000) | random %}
        {% set id = label | replace(' ', '-') | lower + '--' + random_number %}
    {% endif %}
    <label class="comet-form__radio-button{{ ' ' + class if class }}" for="{{ id }}">
        <input id="{{ id }}" name="{{ name }}" value="{{ value }}" type="radio" class="comet-form__radio-button-input" 
            {{ 'checked' if checked }} {{ 'disabled' if disabled }} {% if describedby %} aria-describedby="{{ describedby }}" {% endif %}/>
        <span class="comet-form__radio-button-visual" aria-focusable="false"></span>
        <span class="comet-form__radio-button-text {{'comet-form__label--required' if required}}">
            {{ label | safe }}
            {%- if optional -%}
                <span class="comet-form__label-optional">
                    (Optional)
                </span>
            {%- endif -%}
            {%- if required -%}
                <abbr class="comet-form__label-required-indicator" title="{{ required_tooltip_text }}" aria-hidden="true">*</abbr>
                <span class="comet-screenreader-only">Required Field.</span>
            {% endif %}
        </span>
    </label>
{% endmacro %}


{% macro form_select(
            class="",
            describedby=false,
            disabled=false,
            id=false,
            name=false,
            icon_path=false,
            options=[
                {
                    text: "Select an option",
                    value: ""
                },
                {
                    text: "Option 1",
                    value: "option_1"
                },
                {
                    text: "Option 2",
                    value: "option_2"
                }
            ]) %}
    <div class="comet-form__select{{ ' ' + class if class }}{{ ' comet-form__select-input--disabled' if disabled }}">
        <select class="comet-form__select-input" 
                {% if id %}
                    id="{{ id }}"
                {% endif %} 
                {% if name %}
                    name="{{ name }}"
                {% endif %}                
                {{ 'disabled' if disabled }} 
                {% if describedby %} aria-describedby="{{ describedby }}" {% endif %}>
            {% for option in options %}
                {{ form_select_option_builder(option) }}
            {% endfor %}
        </select>
        <div class="comet-form__select-visual-wrap"></div>
        <span class="comet-form__select-open-indicator">
            {{ icon(name='caret-down', class='comet-form__select-open-icon', path=icon_path) }}
        </span>
    </div>
{% endmacro %}

{% macro form_select_option_builder(option) %}
    {% if option.children %}
        <optgroup label="{{ option.text }}">
            {% for child_option in option.children %}
                {{ form_select_option_builder(child_option) }}
            {% endfor %}
        </optgroup>
    {% else %}
        {{ form_select_option(option) }}
    {% endif %}

{% endmacro %}

{% macro form_select_option(option) %}
    <option class="comet-form__select-option" value="{{ option.value }}" {{ 'selected' if option.selected }}>{{ option.text }}</option>
{% endmacro %}


{% macro form_textarea(
            class=false, 
            describedby=false, 
            disabled=false, 
            id=false, 
            name=false,
            placeholder=false, 
            value=false) %}
    <textarea class="comet-form__textarea{{ ' ' + class  if class }}" 
        {% if id %}
            id="{{ id }}"
        {% endif %} 
        {% if name %}
            name="{{ name }}"
        {% endif %}
        {% if placeholder %}placeholder="{{ placeholder }}"{% endif %}
        {{ 'disabled' if disabled }}  
        {% if describedby %} aria-describedby="{{describedby}}" {% endif %}>{{ value if value }}</textarea>
{% endmacro %}


{% macro form_field_error(
            class=false,  
            id=false,
            text='This field is required',
            icon_path=false) %}
    <span class="comet-form__field-error{{ ' ' + class  if class }}" {% if id %} id="{{ id }}" {% endif %} role="status">
        {{ icon(name='message-error', class='comet-form__field-error-icon', path=icon_path) }}
        <span class="comet-form__field-error-text">
            {{ text }}
        </span>
    </span>
{% endmacro %}


{% macro form_microcopy(
            class=false, 
            id=false,
            text="Passwords must contain a letter, a number, and the answer to the meaning of life") %}
    <span class="comet-form__microcopy{{ ' ' + class  if class }}" {% if id %} id="{{ id }}" {% endif %}>
        {% if text == false %}
            {{ caller() }}
        {% else %}
            {{ text }}
        {% endif %}
    </span>
{% endmacro %}

{% macro form_required_fields_key(
            class=false,
            text="Required fields") %}
    <span class="comet-form__required-fields-key{{ ' ' + class  if class }}">{{ text }}</span>
{% endmacro %}

{% macro form_checkbox_group(
            class=false, 
            label=false,
            optional=false,
            required=false,
            required_tooltip_text="Please select at least one option.") %}
    <fieldset class="comet-form__checkbox-group{{ ' ' + class  if class }}" role="group">
        {% if label %}
            <legend class="comet-form__checkbox-group-label">
                {{ label | safe }}
                {%- if optional -%}
                    <span class="comet-form__label-optional">
                        (Optional)
                    </span>
                {%- endif -%}
                {%- if required -%}
                    <abbr class="comet-form__label-required-indicator" title="{{ required_tooltip_text }}" aria-hidden="true">*</abbr>
                    <span class="comet-screenreader-only">Required Field.</span>
                {% endif %}
            </legend>
        {% endif %}
        {%- if caller -%}
            {{ caller() }}
        {%- endif -%}
    </fieldset>
{% endmacro %}

{% macro form_radio_button_group(
            class=false, 
            label=false,
            optional=false,
            required=false,
            required_tooltip_text="Please select an option.") %}
    <fieldset class="comet-form__radio-button-group{{ ' ' + class  if class }}" role="radiogroup">
        {% if label %}
            <legend class="comet-form__radio-button-group-label">
                {{ label | safe }}
                {%- if optional -%}
                    <span class="comet-form__label-optional">
                        (Optional)
                    </span>
                {%- endif -%}
                {%- if required -%}
                    <abbr class="comet-form__label-required-indicator" title="{{ required_tooltip_text }}" aria-hidden="true">*</abbr>
                    <span class="comet-screenreader-only">Required Field.</span>
                {% endif %}
            </legend>
        {% endif %}
        {%- if caller -%}
            {{ caller() }}
        {%- endif -%}
    </fieldset>
{% endmacro %}

{% macro global_nav_bar(
        class=false,
        id=false,
        product_name="Product Name",
        product_badge_text=false,
        icon_path=false,
        nav_items=[
            {
                label: "Home",
                href: "/",
                type_icon: "home",
                draggable: false
            },
            {
                label: "Search",
                href: "/sample-pages/search.html",
                type_icon: "search",
                draggable: false
            }
        ],
        more_nav_items=[
            {
                label: "Additional Item",
                href: "#",
                type_icon: "clock"
            }
        ]) %}

    <div {% if id %}id="{{ id }}"{% endif %} class="comet-global-nav-bar js-comet-global-nav-bar{{ ' ' + class if class }}">
        <a id="comet-navigation" />
        <a href="/" class="comet-global-nav-bar__header" title="Homepage">
            <div class="comet-global-nav-bar__brand-logo-wrap">
                <img class="comet-global-nav-bar__brand-logo-full" src="/comet/comet_assets/images/de-logo-full.png" alt="Discovery Education">
                <img class="comet-global-nav-bar__brand-logo-small" src="/comet/comet_assets/images/de-logo-sm.png" alt="">
            </div>
        </a>

        <div class="comet-global-nav-bar__list-group comet-list-group comet-list-group--row-inset-m comet-theme--dark-background comet-list-group--no-hairlines">
            <ul class="comet-global-nav-bar__items comet-list-group__list js-comet-global-nav-bar__items--sortable js-comet-global-nav-bar__items--primary">
                {% for nav_item in nav_items %}
                    {{ global_nav_bar_item(nav_item=nav_item, icon_path=icon_path) }}
                {% endfor %}
            </ul>
        </div>

        <div class="comet-global-nav-bar__list-group comet-list-group comet-list-group--row-inset-m comet-theme--dark-background comet-list-group--no-hairlines">
            <header class="comet-global-nav-bar__more-nav-header"></header>
            <ul id="comet-global-nav-bar__more-items" class="comet-global-nav-bar__more-items comet-list-group__list js-comet-global-nav-bar__items--sortable js-comet-global-nav-bar__items--more">
                {% for nav_item in more_nav_items %}
                    {{ global_nav_bar_item(nav_item=nav_item, icon_path=icon_path) }}
                {% endfor %}
            </ul>
            <ul class="comet-global-nav-bar__items--more-hidden-dropzone js-comet-global-nav-bar__items--sortable js-comet-global-nav-bar__items--more-hidden-dropzone"></ul>
        </div>

        <div class="comet-global-nav-bar__customize-panel">
            <a href="/path/to/nav-customization-form" class="comet-global-nav-bar__customization-trigger js-comet-global-nav-bar__customization-toggle comet-button comet-button--icon">
                {{ icon(name="gear", path=icon_path, class="comet-global-nav-bar__customization-icon comet-button--icon__icon") }}
                <span class="comet-global-nav-bar__customization-text comet-button--icon__text">Customize</span>
            </a>
            <div class="comet-global-nav-bar__customize-panel-actions">
                <a href="/path/to/reset/nav" class="comet-global-nav-bar__reset-menu js-comet-global-nav-bar__reset-menu comet-button comet-button--icon">
                    {{ icon(name="reset", path=icon_path, class="comet-button--icon__icon") }}
                    <span class="comet-button--icon__text">Reset Menu</span>
                </a>
                
                <div class="comet-global-nav-bar__customize-panel-save">
                    {{ button(text="Save", variations=["primary"], class="js-comet-global-nav-bar__save-nav-order") }}
                    {{ button(text="Cancel", variations=["ghost"], class="js-comet-global-nav-bar__cancel-nav-order") }}
                </div>
            </div>
        </div>
    </div>
{% endmacro %}

{% macro global_nav_bar_item(nav_item=false, children=false, icon_path=false) %}
    {% if nav_item %}
        {% set draggable = nav_item.draggable | default(true) %}
        {% set icon_path = nav_item.icon_path | default(icon_path) %} {# allow icon paths to be overridden at the individual icon level #}
        {% if nav_item.children %}
            {% set children = true %}
        {% endif %}

        <li class="comet-list-group__row comet-global-nav-bar__item {{ nav_item.class if nav_item.class }} {{ 'comet-global-nav-bar__item--has-children' if children }} {{ 'comet-global-nav-bar__item--home' if nav_item.label == 'Home' }} {{ 'comet-global-nav-bar__item--draggable' if draggable }}">
            {% if nav_item.href %}
                <a class="comet-global-nav-bar__link comet-list-group__row-anchor" href="{{ nav_item.href }}">
                    {% if draggable  %}
                        <div class="comet-global-nav-bar__customize-sortable-target">
                            <span class="comet-global-nav-bar__item-grip-wrap">
                                {{ icon(name="grip", class="comet-global-nav-bar__item-grip-icon")}}
                            </span>
                    {% endif %}
                    {% if nav_item.type_icon %}
                        {{ icon(name=nav_item.type_icon, class="comet-list-group__row-type-icon comet-global-nav-bar__item-icon", path=icon_path) }}
                    {% endif %}
                    {% if draggable %}
                        {# Close the open div so it wraps the item icon and the grip icon #}
                        </div>
                    {% endif %}
                    <span class="comet-global-nav-bar__item-label comet-list-group__row-label">
                        {{ nav_item.label }}
                    </span>
                </a>
            {% else %}
                <span class="comet-global-nav-bar__link-group-label">{{ nav_item.label }}</span>
            {% endif %}
            {% if nav_item.children %}
                <ul class="comet-global-nav-bar__items comet-global-nav-bar__items--children">
                    {% for child_item in nav_item.children %}
                        {{ global_nav_bar_item(child_item) }}
                    {% endfor %}
                </ul>
            {% endif %}
        </li>
    {% endif %}
{% endmacro %}

{% macro grid_row(class='', row_inner_class='') %}
    <div class='comet-row{{ " " + class if class }}'>
        <div class='comet-row__inner-flex{{ " " + row_inner_class if row_inner_class }}'>
            {% if caller %}
                {{ caller() }}
            {% endif %}
        </div>
    </div>
{% endmacro %}

{% macro grid_column(class='', contents='') %}
    <div class='comet-columns{{ " " + class if class }}'>
        {% if contents %}
            {{ contents | safe }}
        {% elif caller %}
            {{ caller() }}
        {% endif %}
    </div>
{% endmacro %}

{% macro icon(name='asset-song', path=false, class=false, screenreader_text=false) %}
    {# Explicitly default path to false in case null or undefined is passed in #}
    {% set path = path | default(false) %}

    {# A passed in 'path' variable will always be used #}
    {% if path == false %}
        {% if global_icon_svg_path != false %}
            {# If no value for path is passed in a global variable called 'global_icon_svg_path' is referenced #}
            {% set path = global_icon_svg_path %}
        {% else %}
            {# If no value for path is passed and no global variable is set, then this path is used by default #}
            {% set path = '/comet/comet_assets/comet.svg' %}
        {% endif %}
    {% endif %}

    <svg{% if class %} class="{{ class }}"{% endif %} aria-hidden="true" focusable="false">
        <use xlink:href="{{ path }}#{{name}}"></use>
    </svg>
    {% if screenreader_text %}<div class="comet-screenreader-only">{{screenreader_text}}</div>{% endif %}
{% endmacro %}

{% set list_group__sample_rows = [
	{
		label: "List Group Row 1 Sample Label",
		href: "#"
	},
	{
		label: "List Group Row 2 Sample Label",
		href: "#"
	},
	{
		label: "List Group Row 3 Sample Label",
		href: "#"
	}
] %}

{% macro list_group__actions(actions) %}
		<ul class="comet-list-group__actions">
			{% for action in actions %}
			<li class="comet-list-group__action-item">

				{% if action.icon_name %}
				<a href="{{ action.href }}" title="{{ action.label }}" class="comet-list-group__action">
					{{ icon(name=action.icon_name, class='comet-list-group__action-icon', path=action.icon_path) }}
				</a>
				{% endif %}

			</li>
			{% endfor %}
		</ul>
{% endmacro %}

{% macro list_group__row(
	row = {},
	actions = false,
	icon_path =false
) %}

	{# Override group actions with row actions #}
	{% if row.actions %}
		{% set actions = row.actions %}
	{% endif %}

	<li class="comet-list-group__row{{ ' comet-list-group__row--selected' if row.selected }}{{ ' ' + row.class if row.class }}"{% if row.selected %}aria-label="selected"{% endif %}>
		<a class="comet-list-group__row-anchor" href="{{ row.href }}">

			{% if row.reorderable %}
			<span class="comet-list-group__row-reorder-handle">
				{{ icon(name='grip', class='comet-list-group__row-reorder-handle-icon', path=icon_path) }}
			</span>
			{% endif %}

			{% if row.type_icon %}
			{{ icon(name=row.type_icon, class='comet-list-group__row-type-icon', path=row.type_icon_path) }}
			{% endif %}

			{% if row.avatar %}
			<img src="{{ row.avatar }}" alt="{{ row.label }}" class="comet-list-group__avatar">
			{% endif %}

			{% if row.status %}
			<span class="comet-list-group__row-status comet-list-group__row-status--{{ row.status }}" title="{{ row.status }}"></span>
			{% endif %}

			{% if row.label %}
				<span class="comet-list-group__row-label">
					{{ row.label }}
				</span>
			{% endif %}

			{% if row.metadata %}
			<span class="comet-list-group__row-metadata">
			{{ row.metadata }}
			</span>
			{% endif %}

			{% if row.badge %}
			<span class="comet-list-group__row-badge">
			{{ row.badge }}
			</span>
			{% endif %}

		</a>

		{{ list_group__actions(actions) if (actions != false) }}

	</li>
{% endmacro %}

{% macro list_group__subhead_row(row) %}
	<li class="comet-list-group__subhead-row">
		{{ row.label }}
	</li>
{% endmacro %}

{% macro list_group(
	actions = [],
	class = false,
	label = false,
	label_count = 0,
	row_by_row_actions = false,
	rows = list_group__sample_rows,
	icon_path=false
) %}

	<div class="comet-list-group{{ ' ' + class if class }}">

		{% if label %}
		<header class="comet-list-group__header">

			<h4 class="comet-list-group__label">
				{{ label }}
				{% if (label_count > 0) %}
					({{ label_count }})	
				{% endif %}
			</h4>

			{{ list_group__actions(actions) if (actions != false) }}

		</header>
		{% endif %}

		<ul class="comet-list-group__list">
		{% for individual_row in rows %}
			{% if individual_row.subheader %}
				{{ list_group__subhead_row(individual_row) }}
			{% else %}
				{{ list_group__row(row=individual_row, actions=row_by_row_actions, icon_path=icon_path) }}	
			{% endif %}
		{% endfor %}
		</ul>

	</div>

{% endmacro %}

{% macro masthead(
            background_image=false, 
            title="Masthead Title", 
            description="A description about this page can go here. Even if it's a little long it'll be okay.", 
            cta_text="Get Started",
            cta_href=false,
            class=false) %}
    <div class="comet-masthead{{ ' ' + class if class }}" 
        {% if background_image %}
            style="background-image:url('{{ background_image }}');"
        {% endif %}
    >
        <div class="comet-masthead__content">
            <h1 class="comet-masthead__title">{{ title }}</h1>
            <p class="comet-masthead__description">{{ description }}</p>
            {{ button(text=cta_text, href=cta_href, el="a", variations=["ghost"], class="comet-masthead__cta comet-button--on-dark") }}
        </div>
    </div>
{% endmacro %}

{% macro modal(
    header=false,
    content=false,
    modal_footer=true,
    directional=false,
    primary_cta_link=false,
    primary_cta_text=false,
    primary_cta_type="primary",
    cancel_cta_text=false,
    cancel_cta_type="ghost",
    class=false,
    id=false,
    wide=false,
    takeover=false
)%}

    {# -------------------------------------------- #}

	<div {{ "id=" + id if id }} class="comet-modal__inner{{ ' ' + class if class }}{{ ' comet-modal--directional' if directional }}{{ ' comet-modal--wide' if wide }}{{ ' comet-modal--takeover' if takeover }}">

        {% if header %}
    		<div class="comet-modal__header comet-long-form-text">
                <h3 class="comet-modal__header-content">{{header}}</h3>
            </div>
        {% endif %}

        <div class="comet-modal__content comet-long-form-text">
            {% if content %}
                <p>{{ content | safe }}</p>
            {% elif caller %}
                {{ caller() }}
            {% endif %}
        </div>

        {% if modal_footer %}
            <div class="comet-modal__footer">
                <div class="comet-modal__button-row">
                    {% if cancel_cta_text %}
                        {{ button(variations=[cancel_cta_type], text=cancel_cta_text, class="comet-modal__button comet-modal__button--cancel js-comet-modal__close-button") }}
                    {% endif %}
                    {% if primary_cta_link %}
                        {{ button(variations=[primary_cta_type], el="a", href=primary_cta_link, text=primary_cta_text, class="comet-modal__button") }}
                    {% else %}
                        {{ button(variations=[primary_cta_type], text=primary_cta_text, class="comet-modal__button") }}
                    {% endif %}
                </div>
            </div>
        {% endif %}

	</div>
{% endmacro %}
{% macro page_shell(class=false) %}
    <a href="#mainContentAnchor" class="comet-screenreader-only comet-skiplinks">Skip to main content</a>
    <a href="#mainNavAnchor" class="comet-screenreader-only comet-skiplinks">Skip to navigation</a>
    <div class="comet-page-shell{{ ' ' + class if class }}">
        {{ caller() }}
    </div>
{% endmacro %}

{% macro page_shell_product_well(icon_path=false, show_footer=false) %}
    <div id="comet-page-shell__product-well" class="comet-page-shell__product-well">
        <div class="comet-page-shell__product-well-inner">
            {{ caller() }}
        </div>
        <div class="comet-page-shell__product-well-overlay js-comet-page-shell__product-well-overlay">
            <div class="comet-page-shell__close-global-nav-bar-wrap">
                <a href="#comet-page-shell__product-well" class="comet-page-shell__close-global-nav-bar js-comet-page-shell__close-global-nav-bar">
                    <span class="comet-screenreader-only">Jump to page content</span>
                    {{ icon(name="x", class="comet-page-shell__close-global-nav-bar-icon", path=icon_path)}}
                </a>
            </div>
        </div>
        {% if show_footer %}
            {{ footer() }}
        {% endif %}
    </div>
{% endmacro %}

{% macro page_shell_global_nav_bar() %}
    <div class="comet-page-shell__global-nav-bar js-comet-page-shell__global-nav-bar" role="region" aria-label="Global Navigation">
        <div class="comet-page-shell__global-nav-bar-touch-overlay js-comet-page-shell_global-nav-bar-touch-overlay"></div>
        <a id="mainNavAnchor" class="comet-screenreader-only" tabindex="0">Navigation Menu</a>
        {{ caller() }}
    </div>
{% endmacro %}

{% macro page_shell_panel(icon_path=false) %}
    <div class="comet-page-shell__panel">
        <div class="comet-page-shell__panel-content">
            <div class="comet-page-shell__close-panel-wrap">
                <a href="#comet-page-shell__product-well" class="comet-page-shell__close-panel js-comet-page-shell__close-panel">
                    <span class="comet-screenreader-only">Jump to page content</span>
                    {{ icon(name="x", class="comet-page-shell__close-panel-icon", path=icon_path)}}
                </a>
            </div>
            {{ caller() }}
        </div>
    </div>
{% endmacro %}

{% macro pill(
	label='Default Pill Label',
	class='',
	screenreader_only_label=false
	) %}
	<span class="comet-pill{{ " " + class if class }}">{% if screenreader_only_label %}<span class="comet-screenreader-only">{{ screenreader_only_label }} </span>{% endif %}{{ label }}</span>
{% endmacro %}

{% macro tag(
	label='Default Tag Label',
	class='',
	avatar=false,
	icon_path=false
	) %}
	<div class="comet-pill comet-tag{{ " comet-tag--avatar" if avatar }}{{ " " + class if class }}">
		{% if avatar %} <img src="{{ avatar }}" alt="" class="comet-tag__avatar"> {% endif %}
		<span class="comet-tag__content">{{ label }}</span>
		<button class="comet-tag__close-button">
			{{ icon(name='x', class="comet-tag__icon", path=icon_path) }}
		</button>
	</div>
{% endmacro %}
{% macro product_bar(
            actions=[{
                text: "Search",
                icon: "search",
                href: "#product-bar-search",
                has_panel: true,
                class: "comet-product-bar__search-reveal"
            },
            {
                text: "Profile"
            },
            {
                text: "Quicklist",
                icon: "bookmark",
                href: "#path-to-quicklist",
                has_panel: true
            }],
            breadcrumbs=false,
            search="input",
            class=false,
            legacy=false,
            icon_path=false,
            navigation_anchor_link="#comet-navigation",
            product_title=false,
            product_title_href="#") %}

        {% if search == "input" %}
            {% set class = (class + ' comet-product-bar__search-revealed-static') %}
        {% endif %}

    <div class="comet-product-bar js-comet-product-bar{{ ' ' + class if class }}">

        <a class="comet-product-bar__global-brand js-comet-product-bar__show-global-nav-bar" href="{{ navigation_anchor_link }}">
            <span class="comet-screenreader-only">View Navigation</span>
            <img class="comet-global-brand-logo" src="/comet/comet_assets/images/de-logo-sm-black.png" alt="Discovery Education Logo">
            <img class="comet-global-brand-logo comet-global-brand-logo--dark-background" src="/comet/comet_assets/images/de-logo-sm.png" alt="Discovery Education Logo">
            {% if legacy %}
                <span class="comet-global-brand-logo--hover-state">
                {{ icon(name='home', class="comet-global-brand-logo--hover-state-icon") }}
                    Home
                </span>
            {% endif %}
        </a>
        {% if product_title %}
            <a class="comet-product-bar__product-title" href="{{ product_title_href }}">
                {% if   product_title == 'math-techbook' or
                        product_title == 'science-techbook' or
                        product_title == 'social-studies-techbook' or
                        product_title == 'streaming-plus'
                %}
                    {{ icon(name=product_title, class="comet-product-bar__product-title-icon", path=icon_path) }}
                    <span class="comet-screenreader-only">{{ product_title }}</span>
                {% else %}
                    {{ product_title }}
                {% endif %}
            </a>
        {% endif %}
        {% if breadcrumbs %}
            <nav>
                <ul class="comet-product-bar__breadcrumbs">
                    {% if breadcrumbs.length > 1 or product_title != false %}
                        {{ breadcrumb_separator() }}
                    {% endif %}

                    {% for breadcrumb in breadcrumbs %}
                        <li class="comet-product-bar__breadcrumb">
                            <a class="comet-product-bar__breadcrumb-link" href="{{ breadcrumb.href }}">
                                {% if breadcrumb.truncated_text %}
                                    <span class="comet-product-bar__breadcrumb-truncated-text">
                                        {{ breadcrumb.truncated_text }}
                                    </span>
                                {% endif %}
                                <span class="comet-product-bar__breadcrumb-text">
                                    {{ breadcrumb.text | safe }}
                                </span>
                            </a>
                        </li>
                        {% if breadcrumbs.length > 1 and loop.last != true %}
                            {{ breadcrumb_separator() }}
                        {% endif %}
                    {% endfor %}
                </ul>
            </nav>
        {% endif %}
        {% if actions %}
            <ul class="comet-product-bar__actions">
                {% for action in actions %}
                        {% if action.separator_after == 'small' %}
                            {% set separator_class = " comet-product-bar__action--separator-after-small" %}
                        {% elif action.separator_after == 'large' %}
                            {% set separator_class = " comet-product-bar__action--separator-after-large" %}
                        {% else %}
                            {% set separator_class = "" %}
                        {% endif %}

                        <li class="comet-product-bar__action{{ separator_class }} comet-product-bar__action--{{ action.text | replace(" ", "-") | lower }}">
                            {% if action.text == 'Profile' %}
                                {# If the profile is requested in the Product Bar, include the entire custom Profile Dropdown Menu as well #}
                                {{ product_bar_profile_menu() }}
                            {% elif action.text == 'Search' %}
                                {{ product_bar_search() }}
                            {% else %}
                                {% set action_class = "comet-product-bar__action-link comet-button--small" %}
                                {% set href = action.href | default("#") %}
                                {% if action.class %}
                                    {% set action_class = action_class + " " + action.class %}
                                {% endif %}
                                {% if action.has_panel %}
                                    {% set action_class = action_class + " " + "js-comet-product-bar__toggle-panel" %}
                                {% endif %}

                                {% if action.display_text and action.icon %}
                                    {% set action_text = "<span class='comet-button--icon__text'>" + action.text + "</span>" %}
                                {% elif action.display_text %}
                                    {% set action_text = action.text %}
                                {% else %}
                                    {% set action_text = "<span class='comet-screenreader-only'>" + action.text + "</span>" %}
                                {% endif %}

                                {% if action.icon and action.icon_position == "right" %}
                                    {% set action_text = action_text + icon(name=action.icon,
                                        class="comet-product-bar__action-icon comet-button--icon__icon",
                                        path=icon_path) %}
                                {% elif action.icon %}
                                    {% set action_text =  icon(name=action.icon,
                                        class="comet-product-bar__action-icon comet-button--icon__icon",
                                        path=icon_path) + action_text %}
                                {% endif %}
                                    {{ button(class=action_class, href=href, text=action_text, el="a", attrs=action.attrs) }}
                            {% endif %}
                        </li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>
{% endmacro %}

{% macro product_bar_profile_menu() %}
    {# Setting the button 'text' equal to the SVG markup for the icon since button doesn't expose a way to add classes directly to the icon within the button #}
    {% set profile_menu_id = 'comet-product-bar__dropdown-menu--profile-' + range(0, 100000) | random %}
    {% set text =  icon(name='profile', class="comet-product-bar__action-icon") + "<span class='comet-screenreader-only'>Show Profile</span>" %}
    {{ button(class="comet-button--small comet-product-bar__action-link comet-dropdown-trigger js-comet-dropdown-trigger comet-button--icon-only", text=text, attrs='data-comet-popover="' + profile_menu_id + '"') }}
    <div class="comet-product-bar__profile-dropdown comet-dropdown-menu comet-popover comet-popover--bottom-right-aligned" id="{{ profile_menu_id }}" data-comet-popover-align="left">
        <div class="comet-list-group comet-theme--dark-background comet-dropdown-menu__list-group comet-list-group--no-hairlines">
            <div class="comet-product-bar__profile-dropdown-header">
                <h3 class="comet-product-bar__profile-dropdown-header-title">Account</h3>
                <a class="comet-product-bar__profile-dropdown-header-close js-comet-dropdown-trigger" data-comet-popover="{{ profile_menu_id }}" href="#">
                    {{ icon(name="x", class="comet-product-bar__profile-dropdown-header-close-icon") }}
                    <span class="comet-screenreader-only">Close</span>
                </a>
            </div>
            <ul class="comet-list-group__list">
                <li class="comet-list-group__row comet-product-bar__profile-dropdown-name-row">
                    <a class="comet-list-group__row-anchor" href="#href.goes.here.html">
                        <img src="/images/components/list-group/kevin.png" alt="Kevin" class="comet-list-group__avatar">
                        <span class="comet-list-group__row-label">
                            <span class="comet-product-bar__view-profile-name-text">
                                Aleksandr Romanov Kuznetsov
                            </span>
                            <span class="comet-product-bar__view-profile-link-text">View Profile</span>
                        </span>
                    </a>
                </li>
                <li class="comet-list-group__row">
                    <a class="comet-list-group__row-anchor" href="#">
                        <span class="comet-list-group__row-label">
                            Help
                        </span>
                    </a>
                </li>
                <li class="comet-list-group__row">
                    <a class="comet-list-group__row-anchor" href="#">
                        <span class="comet-list-group__row-label">
                            My Admin
                        </span>
                    </a>
                </li>
                <li class="comet-list-group__row">
                    <a class="comet-list-group__row-anchor" href="#">
                        <span class="comet-list-group__row-label">
                            Logout
                        </span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    {# {{ dropdown_menu(menu_alignment='right', menu_items=action.menu_items, id=action.dropdown_id, list_group_class="comet-theme--dark-background") }} #}
{% endmacro %}

{% macro product_bar_search() %}
        {% set search_panel_id = 'comet-product-bar__search-panel-' + range(0, 100000) | random %}
        {% set text =  icon(name='search', class="comet-product-bar__action-icon") + "<span class='comet-screenreader-only'>Search</span>" %}
        {{ button(class="comet-button--small comet-product-bar__action-link js-comet-product-bar__toggle-search comet-button--icon-only", text=text, attrs='data-comet-popover="' + search_panel_id + '"') }}

        <div class="comet-product-bar__search">
            <div class="comet-product-bar__search-inner">
                <form class="comet-product-bar__search-box-wrapper"  autocomplete="off">
                    <label class="comet-screenreader-only" for="q">Search</label><input class="comet-form__input comet-product-bar__search-input comet-dropdown-trigger js-comet-dropdown-trigger" type="text" placeholder="Search" data-comet-popover='search-autosuggest' haspopup='true' name="q" id="q">
                    <div class="comet-dropdown-menu comet-popover comet-popover--bottom-left-aligned" id="search-autosuggest" data-comet-popover-align="left">
                        <div class="comet-list-group comet-dropdown-menu__list-group comet-list-group--no-hairlines">
                            <ul class="comet-list-group__list">
                                <li class="comet-list-group__row">
                                    <a class="comet-list-group__row-anchor" href="#"><span class="comet-list-group__row-label">civil war</span></a>
                                </li>
                                <li class="comet-list-group__row">
                                    <a class="comet-list-group__row-anchor" href="#"><span class="comet-list-group__row-label">civil rights</span></a>
                                </li>
                                <li class="comet-list-group__row">
                                    <a class="comet-list-group__row-anchor" href="#"><span class="comet-list-group__row-label">civil rights movement</span></a>
                                </li>
                                <li class="comet-list-group__row">
                                    <a class="comet-list-group__row-anchor" href="#"><span class="comet-list-group__row-label">civil rights act</span></a>
                                </li>
                                <li class="comet-list-group__row">
                                    <a class="comet-list-group__row-anchor" href="#"><span class="comet-list-group__row-label">civil war video</span></a>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <button class="comet-button comet-button--icon-only comet-product-bar__search-button">
                        <svg class="comet-button__icon comet-button__icon--left" aria-hidden="true" focusable="false">
                            <use xlink:href="/comet/comet_assets/comet.svg#search"></use>
                        </svg>
                        <span class="comet-screenreader-only">Search</span>
                    </button>
                </form>
                <a href="#" class="comet-button comet-button--small comet-product-bar__action-link comet-button--icon-only js-comet-product-bar__toggle-search comet-product-bar__close-search">
                    <svg class="comet-product-bar__action-icon" aria-hidden="true" focusable="false">
                        <use xlink:href="/comet/comet_assets/comet.svg#x"></use>
                    </svg>
                    <span class="comet-screenreader-only">Close Search</span>
                </a>
            </div>
        </div>
{% endmacro %}

{% macro breadcrumb_separator() %}
    <li class="comet-product-bar__breadcrumb-separator">
        {{ icon(
            name="caret-right",
            class="comet-product-bar__breadcrumb-separator-icon", path="/comet/comet_assets/comet.svg") }}
    </li>
{% endmacro %}

{% macro row(
    class='',
    content=false,
    background_color=false,
    background_image=false,
    min_height=false,
    max_height= false
)%}

	<div class="comet-row{{ ' ' + class if class }}" 

	{% if (background_color or background_image or min_height or max_height) %}
	style="{{ "min-height:" + min_height + "; " if min_height }} {{ "max-height:" + max_height + "; " if max_height }}{% if background_image and background_color %}background: url({{ background_image | safe }}) {{ background_color }}{% elif background_image %}background-image: url({{ background_image | safe }}){% elif background_color %}background-color: {{ background_color }}{% endif %}"
	{% endif %}

	>
		<div class="comet-row__inner">
			{% if content %}
	            {{ content | safe }}
	        {% elif caller %}
	            {{ caller() }}
	        {% endif %}
		</div>
	</div>

{% endmacro %}

{% macro spinner(
	type='on-light',
	content=false,
	content_type="block",
	size='large',
	class=false
	) %}
	
	{% set spinner_class = "" %}
	{% set spinner_class = spinner_class + "comet-spinner--" + size + " " + "comet-spinner--" + type + " " %}
    {% if class %}
        {% set spinner_class = spinner_class + class %}
    {% endif %}

    <div class="comet-spinner{{' ' + spinner_class | trim }}">

		<svg class="comet-spinner__icon" aria-labelledby="title" viewBox="-10 -10 220 220">
	        <title>{% if content %}{{ content }}{% else %}Loading{% endif %}</title>

	        {% if type == "on-light" %}
				<defs>
					<linearGradient id="spinner-color-1" gradientUnits="objectBoundingBox" x1="0" y1="0" x2="1" y2="1">
						<stop offset="0%" stop-color="{{ tokens.color.neutral['55'] }}" stop-opacity="0"/>   
						<stop offset="100%" stop-color="{{ tokens.color.neutral['55'] }}" stop-opacity=".2"/>   
					</linearGradient>
					<linearGradient id="spinner-color-2" gradientUnits="objectBoundingBox" x1="0" y1="0" x2="0" y2="1">
						<stop offset="0%" stop-color="{{ tokens.color.neutral['55'] }}" stop-opacity=".2"/>   
						<stop offset="100%" stop-color="{{ tokens.color.neutral['55'] }}" stop-opacity=".4"/>   
					</linearGradient>
					<linearGradient id="spinner-color-3" gradientUnits="objectBoundingBox" x1="1" y1="0" x2="0" y2="1">
						<stop offset="0%" stop-color="{{ tokens.color.neutral['55'] }}" stop-opacity=".4"/>   
						<stop offset="100%" stop-color="{{ tokens.color.neutral['55'] }}" stop-opacity=".6"/>   
					</linearGradient>
					<linearGradient id="spinner-color-4" gradientUnits="objectBoundingBox" x1="1" y1="1" x2="0" y2="0">
						<stop offset="0%" stop-color="{{ tokens.color.neutral['55'] }}" stop-opacity=".6"/>   
						<stop offset="100%" stop-color="{{ tokens.color.neutral['55'] }}" stop-opacity=".8"/>   
					</linearGradient>
					<linearGradient id="spinner-color-5" gradientUnits="objectBoundingBox" x1="0" y1="1" x2="0" y2="0">
						<stop offset="0%" stop-color="{{ tokens.color.neutral['55'] }}" stop-opacity=".8"/>   
						<stop offset="100%" stop-color="{{ tokens.color.neutral['55'] }}" stop-opacity="1"/>   
					</linearGradient>
					<linearGradient id="spinner-color-6" gradientUnits="objectBoundingBox" x1="0" y1="1" x2="1" y2="0">
						<stop offset="0%" stop-color="{{ tokens.color.neutral['55'] }}" stop-opacity="1"/>   
						<stop offset="100%" stop-color="{{ tokens.color.neutral['55'] }}" stop-opacity="1"/>   
					</linearGradient>
				</defs>
				<circle fill="{{ tokens.color.neutral['55'] }}" cx="45%" cy="0" r="7.5"/>
				<g fill="none" stroke-width="20" transform="translate(100,100)">
					<path d="M 0,-100 A 100,100 0 0,1 86.6,-50" stroke="url(#spinner-color-1)"/>
					<path d="M 86.6,-50 A 100,100 0 0,1 86.6,50" stroke="url(#spinner-color-2)"/>
					<path d="M 86.6,50 A 100,100 0 0,1 0,100" stroke="url(#spinner-color-3)"/>
					<path d="M 0,100 A 100,100 0 0,1 -86.6,50" stroke="url(#spinner-color-4)"/>
					<path d="M -86.6,50 A 100,100 0 0,1 -86.6,-50" stroke="url(#spinner-color-5)"/>
					<path d="M -86.6,-50 A 100,100 0 0,1 0,-100" stroke="url(#spinner-color-6)"/>
				</g>
		    {% elif type == "on-dark" %}
				<defs>
					<linearGradient id="spinner-color-7" gradientUnits="objectBoundingBox" x1="0" y1="0" x2="1" y2="1">
						<stop offset="0%" stop-color="{{ tokens.color.white }}" stop-opacity="0"/>   
						<stop offset="100%" stop-color="{{ tokens.color.white }}" stop-opacity=".2"/>   
					</linearGradient>
					<linearGradient id="spinner-color-8" gradientUnits="objectBoundingBox" x1="0" y1="0" x2="0" y2="1">
						<stop offset="0%" stop-color="{{ tokens.color.white }}" stop-opacity=".2"/>   
						<stop offset="100%" stop-color="{{ tokens.color.white }}" stop-opacity=".4"/>   
					</linearGradient>
					<linearGradient id="spinner-color-9" gradientUnits="objectBoundingBox" x1="1" y1="0" x2="0" y2="1">
						<stop offset="0%" stop-color="{{ tokens.color.white }}" stop-opacity=".4"/>   
						<stop offset="100%" stop-color="{{ tokens.color.white }}" stop-opacity=".6"/>   
					</linearGradient>
					<linearGradient id="spinner-color-10" gradientUnits="objectBoundingBox" x1="1" y1="1" x2="0" y2="0">
						<stop offset="0%" stop-color="{{ tokens.color.white }}" stop-opacity=".6"/>   
						<stop offset="100%" stop-color="{{ tokens.color.white }}" stop-opacity=".8"/>   
					</linearGradient>
					<linearGradient id="spinner-color-11" gradientUnits="objectBoundingBox" x1="0" y1="1" x2="0" y2="0">
						<stop offset="0%" stop-color="{{ tokens.color.white }}" stop-opacity=".8"/>   
						<stop offset="100%" stop-color="{{ tokens.color.white }}" stop-opacity="1"/>   
					</linearGradient>
					<linearGradient id="spinner-color-12" gradientUnits="objectBoundingBox" x1="0" y1="1" x2="1" y2="0">
						<stop offset="0%" stop-color="{{ tokens.color.white }}" stop-opacity="1"/>   
						<stop offset="100%" stop-color="{{ tokens.color.white }}" stop-opacity="1"/>   
					</linearGradient>
				</defs>
				<circle fill="{{ tokens.color.white }}" cx="45%" cy="0" r="7.5"/>
				<g fill="none" stroke-width="20" transform="translate(100,100)">
					<path d="M 0,-100 A 100,100 0 0,1 86.6,-50" stroke="url(#spinner-color-7)"/>
					<path d="M 86.6,-50 A 100,100 0 0,1 86.6,50" stroke="url(#spinner-color-8)"/>
					<path d="M 86.6,50 A 100,100 0 0,1 0,100" stroke="url(#spinner-color-9)"/>
					<path d="M 0,100 A 100,100 0 0,1 -86.6,50" stroke="url(#spinner-color-10)"/>
					<path d="M -86.6,50 A 100,100 0 0,1 -86.6,-50" stroke="url(#spinner-color-11)"/>
					<path d="M -86.6,-50 A 100,100 0 0,1 0,-100" stroke="url(#spinner-color-12)"/>
				</g>
		    {% endif %}
	 
	    </svg>
	    {% if content %}
		    {% if size == "large" and content_type == "block" %}
				<h3 class="comet-spinner__text">{{content}}</h3>
			{% else %}
	    		<p class="comet-spinner__text{% if content_type == 'inline' %} comet-spinner__text--inline{% endif %}">{{content}}</p>
		    {% endif %}
	    {% endif %}

    </div>

{% endmacro %}
{% macro tabs(
            labels = ["Tab 1", "Tab 2"],
            name = "comet-tabs--name",
            type = "more",
            class = "") %}

    {% set class = class + " comet-tabs--" + type %}

    <div class="comet-tabs {{ class }}">
        {% if type == "horizontal-sliding" %}
            <div class="comet-tabs__horizontal-sliding-outer-wrap">
                <div class="comet-tabs__horizontal-sliding-indicator comet-tabs__horizontal-sliding-indicator--left">
                    {{ icon(class="comet-tabs__horizontal-sliding-icon", name="caret-left") }}
                </div>
                <div class="comet-tabs__horizontal-sliding-wrap">
        {% endif %}
        
        {% for label in labels %}
            {% if label.id %}
                {% set id = label.id %}
            {% else %}
                {% set id = "comet-tab-panel-id--" + label | lower | replace(' ', '-') | replace(r/[~!@\$%\^&\*\(\)\+=,\.\/\;:\?><\[\]\{}\|`#''""]/g, '') + "-" + name %}
            {% endif %}
            <label class="comet-tab__label" for="{{ id }}"><span class="comet-tab__label-text">{{ label }}</span></label>
        {% endfor %}

        {% if type == "horizontal-sliding" %}
                </div>
                <div class="comet-tabs__horizontal-sliding-indicator comet-tabs__horizontal-sliding-indicator--right">
                    {{ icon(class="comet-tabs__horizontal-sliding-icon", name="caret-right") }}
                </div>
            </div>
        {% endif %}

      {% if type == "more" %}
            {% set more_menu_labels = [] %}
            {% set more_menu_id = 'comet-more-menu-id--' + range(0, 100000) | random %}
            {% for label in labels %}
                {% if label.id %}
                    {% set id = label.id %}
                {% else %}
                    {% set id = "comet-tab-panel-id--" + label | lower | replace(' ', '-') | replace(r/[~!@\$%\^&\*\(\)\+=,\.\/\;:\?><\[\]\{}\|`#''""]/g, '') + "-" + name %}
                {% endif %}
                {% set more_menu_labels = (more_menu_labels.push({ "label": label, "href": "#" + id}), more_menu_labels) %}
            {% endfor %}

            <label class="comet-tab__label comet-tab__label--more comet-dropdown-trigger js-comet-dropdown-trigger" data-comet-popover="{{ more_menu_id }}" aria-hidden="true">
                <span class="comet-tab__label-text comet-tab__label-text--more">More</span>
                {{ icon(name="triangle-down", class="comet-tab__more-menu-icon") }}
                {{ dropdown_menu(class="comet-tabs__more-menu", id=more_menu_id, menu_items=more_menu_labels) }}
            </label>


      {% endif %} 
    </div>
{% endmacro %}

{% macro tab_panel(
            label = "Tab 1",
            name = "comet-tabs--name",
            id = false, 
            active = false) %}
    {% if id == false %}
        {% set id = "comet-tab-panel-id--" + label | lower | replace(' ', '-') | replace(r/[~!@\$%\^&\*\(\)\+=,\.\/\;:\?><\[\]\{}\|`#''""]/g, '') + "-" + name %}
    {% endif %}
    <input class="comet-tab__input" type="radio" id="{{ id }}" name="{{ name }}" value="{{ id }}" {{ 'checked' if active }}>
    <div class="comet-tab__panel">
        {{ caller() }}
    </div>
{% endmacro %}

{% macro thumbnail(
    alt='',
    class=false,
    img_url=false,
    icon_path=false,
    asset_type='document',
    background_size='cover'
    ) %}

    {# Explicitly set defaults in case null or undefined values are passed in #}
    {% set asset_type = asset_type | default('document') %}
    {% set img_url = img_url | default(false) %}

    <div class="comet-thumbnail{{ " " + class if (class) }}{{ ' comet-thumbnail--no-image' if img_url == false }}">
        <div class="comet-thumbnail__inner" {% if img_url %}style="background-image: url('{{ img_url }}')"{% endif %} >

            {% if img_url %}
                <img src="{{ img_url }}" alt="{{ alt }}" class="comet-thumbnail__print-only-image">
            {% endif %}

            {% if alt %}
            <span class="comet-screenreader-only">{{ alt }}</span>
            {% endif %}

            {% if img_url == false %}
                {{ icon(
                    name= "asset-" + asset_type | lower | replace(' ','-') ,
                    class='comet-thumbnail__icon',
                    path=icon_path)
                }}
            {% endif %}

        </div>
    </div>

{% endmacro %}

{% macro tile(
    class = false,
    img_url = false,
    href = false,
    asset_type = false,
    title = fasle,
    caption = false,
    element_type = "div",
    thumbnail_icon_path = false,
    thumbnail_contain = false,
    icon_overlay = false,
    icon_path = false,
    gradient = false,
    simple = false,
    text_row = false,
    text_row_link = false
) %}
        <{{ element_type }} class="comet-tile{{ ' ' + class if class}}{{ ' comet-tile--icon-overlay' if icon_overlay}}{{ ' comet-tile--gradient' if gradient}}{{ ' comet-tile--simple' if simple}}{{ ' comet-tile--text-row' if text_row}}">
            <a href="{{ href }}" class="comet-tile__anchor">

                {% if not simple %}
                    <!-- Image / Icon -->
                    {% set thumbnail_classes = "" %}
                    {% if thumbnail_contain %}
                        {% set thumbnail_classes = thumbnail_classes + " comet-thumbnail--contain" %}
                    {% else %}
                        {% set thumbnail_classes = thumbnail_classes + " comet-thumbnail--squared" %}
                    {% endif %}

                    {{ thumbnail(
                        class = thumbnail_classes,
                        asset_type = asset_type,
                        img_url = img_url,
                        icon_path = thumbnail_icon_path
                    )}}
                {% endif %}

                <div class="comet-tile__overlay"></div>

                {% if icon_overlay %}
                    {{ icon(
                        name = icon_overlay,
                        class='comet-tile__icon',
                        path=icon_path)
                    }}
                {% endif %}
                <section class="comet-tile__copy">
                    <p class="comet-tile__title">{{ title }}</p>

                    {% if caption %}
                        <p class="comet-tile__caption">{{ caption }}</p>
                    {% endif %}
                </section>
            </a>

            {% if text_row %}
                <div class="comet-tile__text-row">
                    <a href="{{ text_row_link }}" class="comet-tile__text-row-link">
                        {{text_row}}
                    </a>
                </div>
            {% endif %}

        </{{ element_type }}>
{% endmacro %}
{% macro top_hat(
    content=false,
    icon_name=false,
    notice=false,
    custom_background_color=false,
    text_color_dark=false,
    dismissible=false,
    icon_path=false,
    cta_text=false,
    cta_link=false,
    class=false
)%}

    {# Concatenate the overall class for the top-hat #}
    {% set top_hat_class = "" %}

    {% if notice %}
        {% set top_hat_class = top_hat_class + "comet-top-hat--notice" %}
        {% set icon_name = "message-error" %}
    {% elif custom_background_color %}
        {% set top_hat_class = top_hat_class + "comet-top-hat--custom" %}
    {% endif %}

    {% if text_color_dark %}
        {% set top_hat_class = top_hat_class + "comet-top-hat--dark" %}
    {% endif %}

    {% if class %}
        {% set top_hat_class = top_hat_class + class %}
    {% endif %}

    {# -------------------------------------------- #}

    <div class="comet-top-hat{{" " + top_hat_class | trim }}" role="alert" {% if custom_background_color.length %}style="background:{{custom_background_color}};"{% endif %}>
        <div class="comet-top-hat__content">
            {% if icon_name %}
                {{ icon(name=icon_name, class="comet-top-hat__icon", path=icon_path) }}
            {% endif %}

            <p>{{content|safe}}</p>

            {% if cta_text %}
                {% if custom_background_color and not text_color_dark %}
                    {{ button(variations=["ghost", "small", "on-dark"], el="a", href=cta_link, text=cta_text) }}
                {% else %}
                    {{ button(variations=["secondary", "small"], el="a", href=cta_link, text=cta_text) }}
                {% endif %}
            {% endif %}
        </div>
        {% if dismissible %}
            <div class="comet-top-hat__close">
                <button type="button" class="comet-top-hat__close-button js-comet-top-hat__close-button" aria-label="Close">
                    {{ icon(name="x", class="comet-top-hat__icon comet-top-hat__icon--close", path=icon_path) }}
                </button>
            </div>
        {% endif %}
    </div>
{% endmacro %}